<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Ultra Holiday Modal</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="preload" href="page1.html" as="document">
<link rel="preload" href="page2.html" as="document">

<style>
/* =========================================================
   ROOT
========================================================= */
:root{
    --snow-x:0px;
    --snow-y:0px;
    --glow-strength:.15;
    --snow-opacity:1;
}

/* =========================================================
   RESET / BASE
========================================================= */
*{margin:0;padding:0;box-sizing:border-box;font-family:system-ui,Arial}
body{
    height:100vh;
    background:#050505;
    color:#fff;
    overflow:hidden;
}

/* =========================================================
   OVERLAY
========================================================= */
.modal-overlay{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,.78);
    backdrop-filter:blur(10px);
    display:flex;
    align-items:center;
    justify-content:center;
    z-index:9999;
}

/* =========================================================
   THEME AURORA
========================================================= */
.theme-aurora{
    position:absolute;
    inset:-60%;
    filter:blur(120px);
    animation:spin 80s linear infinite;
    transition:opacity 3s ease, filter 3s ease;
    pointer-events:none;
}

.theme-noel{
    background:
        radial-gradient(circle at 20% 30%, rgba(0,255,180,var(--glow-strength)), transparent 45%),
        radial-gradient(circle at 80% 35%, rgba(255,80,120,var(--glow-strength)), transparent 50%);
}

.theme-newyear{
    background:
        radial-gradient(circle at 30% 40%, rgba(255,200,120,.22), transparent 45%),
        radial-gradient(circle at 70% 60%, rgba(180,120,255,.22), transparent 50%);
}

.theme-normal{
    background:
        radial-gradient(circle at center, rgba(120,120,255,.12), transparent 55%);
}

@keyframes spin{
    from{transform:rotate(0deg)}
    to{transform:rotate(360deg)}
}

/* =========================================================
   SNOW
========================================================= */
.snow{
    position:absolute;
    inset:-200%;
    pointer-events:none;
    opacity:var(--snow-opacity);
    transform:translate(var(--snow-x),var(--snow-y));
    animation:snowFall linear infinite;
}

.layer1{
    background:radial-gradient(2px 2px at 20% 30%, rgba(255,255,255,.8) 50%, transparent 60%);
    background-size:180px 180px;
    animation-duration:40s;
}
.layer2{
    background:radial-gradient(1.5px 1.5px at 40% 60%, rgba(255,255,255,.6) 50%, transparent 60%);
    background-size:140px 140px;
    animation-duration:60s;
}
.layer3{
    background:radial-gradient(1px 1px at 70% 20%, rgba(255,255,255,.5) 50%, transparent 60%);
    background-size:100px 100px;
    animation-duration:90s;
}

@keyframes snowFall{
    from{transform:translateY(0)}
    to{transform:translateY(50%)}
}

/* =========================================================
   COUNTDOWN GLOW
========================================================= */
.countdown{
    position:absolute;
    inset:0;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:72px;
    font-weight:600;
    color:rgba(255,255,255,.08);
    letter-spacing:6px;
    pointer-events:none;
    mix-blend-mode:overlay;
    animation:pulse 2s ease-in-out infinite;
}

@keyframes pulse{
    0%,100%{opacity:.4}
    50%{opacity:.7}
}

/* =========================================================
   FIREWORKS
========================================================= */
.firework{
    position:absolute;
    width:6px;
    height:6px;
    border-radius:50%;
    animation:explode 1.8s ease-out forwards;
}

@keyframes explode{
    from{transform:scale(1);opacity:1}
    to{transform:scale(6);opacity:0}
}

/* =========================================================
   VIGNETTE
========================================================= */
.vignette{
    position:absolute;
    inset:0;
    background:radial-gradient(
        ellipse at center,
        rgba(0,0,0,0) 35%,
        rgba(0,20,40,.9) 100%
    );
    pointer-events:none;
}

/* =========================================================
   MODAL (GIỮ NGUYÊN)
========================================================= */
.modal{
    position:relative;
    width:92%;
    max-width:420px;
    padding:34px;
    text-align:center;
    background:rgba(18,18,18,.55);
    border:1px solid rgba(255,255,255,.1);
    border-radius:20px;
    backdrop-filter:blur(18px);
    box-shadow:0 40px 80px rgba(0,0,0,.7);
}

.modal h1{font-size:22px;margin-bottom:10px}
.modal p{opacity:.8;margin-bottom:24px}

.actions{
    display:flex;
    gap:14px;
}

.btn{
    flex:1;
    padding:14px 0;
    border:none;
    border-radius:12px;
    font-weight:600;
    cursor:pointer;
    color:#fff;
    transition:.25s;
}

.btn-primary{background:linear-gradient(135deg,#ff4d4d,#ff2d87)}
.btn-secondary{background:linear-gradient(135deg,#36c5f0,#5b5bff)}

.btn:hover{transform:scale(1.05)}
.btn:active{transform:scale(.95)}
</style>
</head>

<body>

<div class="modal-overlay">

    <div class="theme-aurora"></div>

    <div class="snow layer1"></div>
    <div class="snow layer2"></div>
    <div class="snow layer3"></div>

    <div class="countdown" id="countdown"></div>

    <div class="vignette"></div>

    <div class="modal">
        <h1>Chọn hướng truy cập</h1>
        <p>Vui lòng chọn để tiếp tục</p>
        <div class="actions">
            <button class="btn btn-primary" onclick="go('A')">Trang 1</button>
            <button class="btn btn-secondary" onclick="go('B')">Trang 2</button>
        </div>
    </div>
</div>

<audio id="ambientSound" loop preload="auto">
    <source src="ambient-winter.mp3" type="audio/mpeg">
</audio>

<script>
/* =========================================================
   NAV
========================================================= */
const TARGETS={A:"page1.html",B:"page2.html"};
let locked=false;
function go(k){
    if(locked)return;
    locked=true;
    setTimeout(()=>location.href=TARGETS[k],250);
}

/* =========================================================
   SNOW MOUSE
========================================================= */
window.addEventListener("mousemove",e=>{
    const x=(e.clientX/window.innerWidth-.5)*20;
    const y=(e.clientY/window.innerHeight-.5)*20;
    document.documentElement.style.setProperty("--snow-x",`${x}px`);
    document.documentElement.style.setProperty("--snow-y",`${y}px`);
});

/* =========================================================
   THEME
========================================================= */
const aurora=document.querySelector(".theme-aurora");
function applyTheme(){
    aurora.className="theme-aurora";
    const d=new Date(),m=d.getMonth()+1,day=d.getDate();
    if(m===12&&day<=25)aurora.classList.add("theme-noel");
    else if(m===12&&day>25)aurora.classList.add("theme-newyear");
    else aurora.classList.add("theme-normal");
}
applyTheme();

/* =========================================================
   COUNTDOWN + MIDNIGHT EVENTS
========================================================= */
const countdown=document.getElementById("countdown");
function updateCountdown(){
    const now=new Date();
    const midnight=new Date();
    midnight.setHours(24,0,0,0);
    const diff=midnight-now;
    if(diff<=0){
        countdown.style.display="none";
        startNewYearEffects();
        return;
    }
    const m=Math.floor(diff/60000);
    const s=Math.floor(diff/1000)%60;
    countdown.textContent=`${m}:${s.toString().padStart(2,"0")}`;
}
setInterval(updateCountdown,1000);

/* =========================================================
   NEW YEAR EFFECTS
========================================================= */
function startNewYearEffects(){
    // Fade theme
    aurora.style.opacity=0;
    setTimeout(()=>{
        aurora.className="theme-aurora theme-newyear";
        aurora.style.opacity=1;
    },3000);

    // Snow melt
    document.documentElement.style.setProperty("--snow-opacity",".7");
    setTimeout(()=>document.documentElement.style.setProperty("--snow-opacity",".4"),8000);
    setTimeout(()=>document.documentElement.style.setProperty("--snow-opacity",".15"),16000);

    // Fireworks
    for(let i=0;i<12;i++){
        setTimeout(()=>createFirework(),i*400);
    }
}

function createFirework(){
    const fw=document.createElement("div");
    fw.className="firework";
    fw.style.left=Math.random()*100+"%";
    fw.style.top=Math.random()*60+"%";
    fw.style.background=`hsl(${Math.random()*360},100%,70%)`;
    document.body.appendChild(fw);
    setTimeout(()=>fw.remove(),2000);
}

/* =========================================================
   SOUND
========================================================= */
const sound=document.getElementById("ambientSound");
sound.volume=.03;
document.addEventListener("click",()=>{
    if(sound.paused)sound.play().catch(()=>{});
},{once:true});
</script>

</body>
</html>
